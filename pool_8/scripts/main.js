"use strict";function fetchLocal(s){return new Promise(function(t,e){var i=new XMLHttpRequest;i.onload=function(){t(new Response(i.response,{status:i.status}))},i.onerror=function(){e(new TypeError("Local request failed"))},i.open("GET",s),i.responseType="arraybuffer",i.send(null)})}function u(t,e,i,s){t.v.rc(t.bb,e,i,s,void 0)}function F(t,e,i,s){t.v.ca?u(t,e,i,s):t.v.hf()._OnMessageFromDOM({type:"event",component:t.bb,handler:e,dispatchOpts:s||null,data:i,responseId:null})}function H(t,e,i){t.v.C(t.bb,e,i)}function I(t,e){for(var[i,s]of e)H(t,i,s)}function K(t){t.Sb||(t.v.Te(t.de),t.Sb=!0)}function L(t){-1!==t.Ra&&(self.clearTimeout(t.Ra),t.Ra=-1)}function N(i,s){H(i,"get-element",t=>{var e=i.ba.get(t.elementId);return s(e,t)})}window.Ba=class{constructor(t,e){this.v=t,this.bb=e,this.Sb=!1,this.de=()=>this.Ea()}jd(){}Ea(){}},window.Ke=class{constructor(t,e){this.Qc=t,this.vg=e,this.Ra=-1,this.Tb=-1/0,this.ee=()=>{this.Ra=-1,this.Tb=Date.now(),this.hb=!0,this.Qc(),this.hb=!1},this.Nd=this.hb=!1}c(){L(this),this.ee=this.Qc=null}},window.Qg=class extends self.Ba{constructor(t,e){super(t,e),this.ba=new Map,this.Pc=!0,I(this,[["create",()=>{throw Error("required override")}],["destroy",t=>{{t=t.elementId;const e=this.ba.get(t);this.Pc&&e.parentElement.removeChild(e),this.ba.delete(t)}}],["set-visible",t=>{this.Pc&&(this.ba.get(t.elementId).style.display=t.isVisible?"":"none")}],["update-position",t=>{var e;this.Pc&&((e=this.ba.get(t.elementId)).style.left=t.left+"px",e.style.top=t.top+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",null!==(t=t.fontSize)&&(e.style.fontSize=t+"em"))}],["update-state",t=>{throw this.ba.get(t.elementId),Error("required override")}],["focus",t=>this.Jc(t)],["set-css-style",t=>{this.ba.get(t.elementId).style[t.prop]=t.val}],["set-attribute",t=>{this.ba.get(t.elementId).setAttribute(t.name,t.val)}],["remove-attribute",t=>{this.ba.get(t.elementId).removeAttribute(t.name)}]]),N(this,t=>t)}Jc(t){var e=this.ba.get(t.elementId);t.focus?e.focus():e.blur()}};{const va=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent);let n=0;function b(i){const s=document.createElement("script");return s.async=!1,s.type="",i.Gg?new Promise(t=>{var e="c3_resolve_"+n;++n,self[e]=t,s.textContent=i.Kg+`

self["${e}"]();`,document.head.appendChild(s)}):new Promise((t,e)=>{s.onload=t,s.onerror=e,s.src=i,document.head.appendChild(s)})}let t=!1,e=!1;function m(){if(!t){try{new Worker("blob://",{get type(){e=!0}})}catch(t){}t=!0}return e}let i=new Audio;const x={"audio/webm; codecs=opus":!!i.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!i.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!i.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!i.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!i.canPlayType("audio/mp4"),"audio/mpeg":!!i.canPlayType("audio/mpeg")};async function A(t){return t=await B(t),new TextDecoder("utf-8").decode(t)}function B(s){return new Promise((e,i)=>{const t=new FileReader;t.onload=t=>e(t.target.result),t.onerror=t=>i(t),t.readAsArrayBuffer(s)})}i=null;const v=[];let s=0;window.RealFile=window.File;const Ba=[],Ca=new Map,z=new Map;let r=0;const Ea=[];self.runOnStartup=function(t){if("function"!=typeof t)throw Error("runOnStartup called without a function");Ea.push(t)};const M=new Set(["cordova","playable-ad","instant-games"]);let a=!1;window.ma=class Va{constructor(t){var e;this.ca=t.Mg,this.pa=null,this.F="",this.ec=t.Jg,this.wb={},this.Ka=this.vb=null,this.Qb=[],this.kb=this.G=this.Pa=null,this.Oa=-1,this.Ag=()=>this.Gf(),this.Na=[],this.s=t.fe,this.ib="file"===location.protocol.substr(0,4),!this.ca||"undefined"!=typeof OffscreenCanvas&&navigator.userActivation&&m()||(this.ca=!1),"playable-ad"!==this.s&&"instant-games"!==this.s||(this.ca=!1),"cordova"===this.s&&this.ca&&(/android/i.test(navigator.userAgent)&&(e=/Chrome\/(\d+)/i.exec(navigator.userAgent))&&90<=parseInt(e[1],10)||(this.ca=!1)),this.Vb=this.ha=null,"html5"!==this.s&&"playable-ad"!==this.s||this.ib,"html5"!==this.s||window.isSecureContext||console.warn("[Construct 3] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available."),this.C("runtime","cordova-fetch-local-file",t=>this.qf(t)),this.C("runtime","create-job-worker",()=>this.rf()),"cordova"===this.s?document.addEventListener("deviceready",()=>this.Ad(t)):this.Ad(t)}c(){this.xc(),this.pa&&(this.pa=this.pa.onmessage=null),this.vb&&(this.vb.terminate(),this.vb=null),this.Ka&&(this.Ka.c(),this.Ka=null),this.G&&(this.G.parentElement.removeChild(this.G),this.G=null)}Fe(){return va&&"cordova"===this.s}qc(){var t=navigator.userAgent;return va&&M.has(this.s)||navigator.standalone||/crios\/|fxios\/|edgios\//i.test(t)}async Ad(i){if("macos-wkwebview"===this.s&&this.Nc({type:"ready"}),"playable-ad"===this.s){this.ha=self.c3_base64files,this.Vb={},await this.Ye();for(let t=0,e=i.Sa.length;t<e;++t){var s=i.Sa[t].toLowerCase();this.Vb.hasOwnProperty(s)?i.Sa[t]={Gg:!0,Kg:this.Vb[s]}:this.ha.hasOwnProperty(s)&&(i.Sa[t]=URL.createObjectURL(this.ha[s]))}}i.Bg?this.F=i.Bg:(s=location.origin,this.F=("null"===s?"file:///":s)+location.pathname,-1!==(s=this.F.lastIndexOf("/"))&&(this.F=this.F.substr(0,s+1))),i.Og&&(this.wb=i.Og),s=new MessageChannel,this.pa=s.port1,this.pa.onmessage=t=>this._OnMessageFromRuntime(t.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(t=>this.Cf(t)),this.kb=new self.Ge(this),await O(this.kb),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),this.ca?await this.kf(i,s.port2):await this.jf(i,s.port2)}Ac(t){return t=(t=this.wb.hasOwnProperty(t)?this.wb[t]:t.endsWith("/workermain.js")&&this.wb.hasOwnProperty("workermain.js")?this.wb["workermain.js"]:"playable-ad"===this.s&&this.ha.hasOwnProperty(t.toLowerCase())?this.ha[t.toLowerCase()]:t)instanceof Blob?URL.createObjectURL(t):t}async kc(t,e,i){if(t.startsWith("blob:"))return new Worker(t,i);if("cordova"===this.s&&this.ib)return t=await this.xb(i.Fg?t:this.ec+t),new Worker(URL.createObjectURL(new Blob([t],{type:"application/javascript"})),i);if(t=new URL(t,e),location.origin===t.origin)return new Worker(t,i);if(!(t=await fetchLocal(t)).ok)throw Error("failed to fetch worker script");return t=await t.blob(),new Worker(URL.createObjectURL(t),i)}wa(){return Math.max(window.innerWidth,1)}va(){return Math.max(window.innerHeight,1)}zd(t){var e=this.kb;return{baseUrl:this.F,windowInnerWidth:this.wa(),windowInnerHeight:this.va(),devicePixelRatio:window.devicePixelRatio,isFullscreen:Va.Wa(),projectData:t.Vg,previewImageBlobs:window.cr_previewImageBlobs||this.ha,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,previewProjectFileSWUrls:window.cr_previewProjectFiles,swClientId:window.Tg||"",exportType:t.fe,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.Ug,jobScheduler:{inputPort:e.Wc,outputPort:e.bd,maxNumWorkers:e.xg},supportedAudioFormats:x,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.ec+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.ec+"opus.wasm.wasm",isFileProtocol:this.ib,isiOSCordova:this.Fe(),isiOSWebView:this.qc(),isFBInstantAvailable:void 0!==self.FBInstant}}async kf(i,t){var e=this.Ac(i.Ng);this.vb=await this.kc(e,this.F,{type:"module",name:"Runtime",Fg:!0}),this.G=document.createElement("canvas"),this.G.style.display="none",e=this.G.transferControlToOffscreen(),document.body.appendChild(this.G),window.c3canvas=this.G;let s=i.hd||[],n=i.Sa;if(s=await Promise.all(s.map(t=>this.Fa(t))),n=await Promise.all(n.map(t=>this.Fa(t))),"cordova"===this.s)for(let t=0,e=i.ic.length;t<e;++t){const a=i.ic[t],h=a[0];h!==i.fd&&"scriptsInEvents.js"!==h&&!h.endsWith("/scriptsInEvents.js")||(a[1]=await this.Fa(h))}this.vb.postMessage(Object.assign(this.zd(i),{type:"init-runtime",isInWorker:!0,messagePort:t,canvas:e,workerDependencyScripts:s,engineScripts:n,projectScripts:i.ic,mainProjectScript:i.fd,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[t,e,...P(this.kb)]),this.Qb=Ba.map(t=>new t(this)),this.yd(),self.c3_callFunction=(t,e)=>this.Pa.lf(t,e),"preview"===this.s&&(self.goToLastErrorScript=()=>this.rc("runtime","go-to-last-error-script"))}async jf(t,e){this.G=document.createElement("canvas"),this.G.style.display="none",document.body.appendChild(this.G),window.c3canvas=this.G,this.Qb=Ba.map(t=>new t(this)),this.yd();var i=t.Sa.map(t=>"string"==typeof t?new URL(t,this.F).toString():t);Array.isArray(t.hd)&&i.unshift(...t.hd),i=await Promise.all(i.map(t=>this.Fa(t))),await Promise.all(i.map(t=>b(t)));var s,n,i=self.C3_ProjectScriptsStatus,a=t.fd;for([s,n]of t.ic)if(n=n||s,s===a)try{n=await this.Fa(n),await b(n),"preview"!==this.s||i[s]||this.Id(s,"main script did not run to completion")}catch(t){this.Id(s,t)}else"scriptsInEvents.js"!==s&&!s.endsWith("/scriptsInEvents.js")||(n=await this.Fa(n),await b(n));"preview"===this.s&&"object"!=typeof self.Pg.Rg?(this.Jb(),console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(t=Object.assign(this.zd(t),{isInWorker:!1,messagePort:e,canvas:this.G,runOnStartupFunctions:Ea}),this.Cd(),this.Ka=self.C3_CreateRuntime(t),await self.C3_InitRuntime(this.Ka,t))}Id(t,e){this.Jb(),console.error(`[Preview] Failed to load project main script (${t}): `,e),alert(`Failed to load project main script (${t}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`)}Cd(){this.Jb()}Jb(){const t=window.Cg;t&&(t.parentElement.removeChild(t),window.Cg=null)}async rf(){var t=await Q(this.kb);return{outputPort:t,transferables:[t]}}hf(){if(this.ca)throw Error("not available in worker mode");return this.Ka}rc(t,e,i,s,n){this.pa.postMessage({type:"event",component:t,handler:e,dispatchOpts:s||null,data:i,responseId:null},n)}rd(t,e,i,s,n){const a=r++,h=new Promise((t,e)=>{z.set(a,{resolve:t,reject:e})});return this.pa.postMessage({type:"event",component:t,handler:e,dispatchOpts:s||null,data:i,responseId:a},n),h}["_OnMessageFromRuntime"](t){var e=t.type;if("event"===e)return this.wf(t);if("result"===e)this.Jf(t);else if("runtime-ready"===e)this.Kf();else if("alert-error"===e)this.Jb(),alert(t.message);else{if("creating-runtime"!==e)throw Error(`unknown message '${e}'`);this.Cd()}}wf(t){const e=t.component,i=t.handler,s=t.data,n=t.responseId;if(t=Ca.get(e))if(t=t.get(i)){var a=null;try{a=t(s)}catch(t){return console.error(`Exception in '${e}' handler '${i}':`,t),void(null!==n&&this.Ib(n,!1,""+t))}if(null===n)return a;a&&a.then?a.then(t=>this.Ib(n,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${i}':`,t),this.Ib(n,!1,""+t)}):this.Ib(n,!0,a)}else console.warn(`[DOM] No handler '${i}' for component '${e}'`);else console.warn(`[DOM] No event handlers for component '${e}'`)}Ib(t,e,i){let s;i&&i.transferables&&(s=i.transferables),this.pa.postMessage({type:"result",responseId:t,isOk:e,result:i},s)}Jf(t){var e=t.responseId,i=t.isOk;t=t.result;const s=z.get(e);i?s.resolve(t):s.reject(t),z.delete(e)}C(t,e,i){let s=Ca.get(t);if(s||(s=new Map,Ca.set(t,s)),s.has(e))throw Error(`[DOM] Component '${t}' already has handler '${e}'`);s.set(e,i)}static Ta(t){if(Ba.includes(t))throw Error("DOM handler already added");Ba.push(t)}yd(){for(const t of this.Qb)if("runtime"===t.bb)return void(this.Pa=t);throw Error("cannot find runtime DOM handler")}Cf(t){this.rc("debugger","message",t)}Kf(){for(const t of this.Qb)t.jd()}static Wa(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||a)}static Kb(t){a=!!t}Te(t){this.Na.push(t),this.Mc()}Wf(t){if(-1===(t=this.Na.indexOf(t)))throw Error("invalid callback");this.Na.splice(t,1),this.Na.length||this.xc()}Mc(){-1===this.Oa&&this.Na.length&&(this.Oa=requestAnimationFrame(this.Ag))}xc(){-1!==this.Oa&&(cancelAnimationFrame(this.Oa),this.Oa=-1)}Gf(){this.Oa=-1;for(const t of this.Na)t();this.Mc()}ua(t){this.Pa.ua(t)}Da(t){this.Pa.Da(t)}Lc(){this.Pa.Lc()}Db(t){this.Pa.Db(t)}Ee(){return!!x["audio/webm; codecs=opus"]}async tg(t){return t=await this.rd("runtime","opus-decode",{arrayBuffer:t},null,[t]),new Float32Array(t)}De(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)}qd(t){return!this.De(t)}async Fa(t){return"cordova"===this.s&&(t.startsWith("file:")||this.ib&&this.qd(t))?(t.startsWith(this.F)&&(t=t.substr(this.F.length)),t=await this.xb(t),URL.createObjectURL(new Blob([t],{type:"application/javascript"}))):t}async qf(t){var e=t.filename;switch(t.as){case"text":return this.we(e);case"buffer":return this.xb(e);default:throw Error("unsupported type")}}md(t){const s=window.cordova.file.applicationDirectory+"www/"+t.toLowerCase();return new Promise((e,i)=>{window.resolveLocalFileSystemURL(s,t=>{t.file(e,i)},i)})}async we(t){return t=await this.md(t),A(t)}yc(){var t;!v.length||8<=s||(s++,t=v.shift(),this.Ze(t.filename,t.Lg,t.Eg))}xb(t){return new Promise((e,i)=>{v.push({filename:t,Lg:t=>{s--,this.yc(),e(t)},Eg:t=>{s--,this.yc(),i(t)}}),this.yc()})}async Ze(t,e,i){try{var s=await this.md(t);e(await B(s))}catch(t){i(t)}}Nc(t){if("windows-webview2"===this.s)window.chrome.webview.postMessage(JSON.stringify(t));else{if("macos-wkwebview"!==this.s)throw Error("cannot send wrapper message");window.webkit.messageHandlers.C3Wrapper.postMessage(JSON.stringify(t))}}async Ye(){const t=[];for(var[e,i]of Object.entries(this.ha))t.push(this.Xe(e,i));await Promise.all(t)}async Xe(e,i){if("object"==typeof i)this.ha[e]=new Blob([i.str],{type:i.type}),this.Vb[e]=i.str;else{let t=await this.ff(i);t=t||this.af(i),this.ha[e]=t}}async ff(t){try{return await(await fetchLocal(t)).blob()}catch(t){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",t),null}}af(t){return t=this.Qf(t),this.We(t.data,t.Hg)}Qf(t){var e=t.indexOf(",");if(e<0)throw new URIError("expected comma in data: uri");var i=t.substring(e+1);t=(e=t.substring(5,e).split(";"))[0]||"";var s=e[2];return{Hg:t,data:i=("base64"===e[1]||"base64"===s?atob:decodeURIComponent)(i)}}We(t,e){var i=t.length;let s=i>>2,n=new Uint8Array(i),a=new Uint32Array(n.buffer,0,s),h,r;for(r=h=0;h<s;++h)a[h]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;for(i&=3;i--;)n[r]=t.charCodeAt(r),++r;return new Blob([n],{type:e})}}}{const A1=self.ma;function a(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||t.originalEvent&&t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents}const b=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),B1={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},C1={dispatchUserScriptEvent:!0},m={dispatchRuntimeEvent:!0};function p(s){return new Promise((t,e)=>{const i=document.createElement("link");i.onload=()=>t(i),i.onerror=t=>e(t),i.rel="stylesheet",i.href=s,document.head.appendChild(i)})}function x(s){return new Promise((t,e)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>e(t),i.src=s})}async function A(t){t=URL.createObjectURL(t);try{return await x(t)}finally{URL.revokeObjectURL(t)}}function B(s){return new Promise((e,i)=>{let t=new FileReader;t.onload=t=>e(t.target.result),t.onerror=t=>i(t),t.readAsText(s)})}async function v(t,e,i){if(!/firefox/i.test(navigator.userAgent))return A(t);var s=await B(t);const n=(s=(new DOMParser).parseFromString(s,"image/svg+xml")).documentElement;if(n.hasAttribute("width")&&n.hasAttribute("height")){const a=n.getAttribute("width"),h=n.getAttribute("height");if(!a.includes("%")&&!h.includes("%"))return A(t)}return n.setAttribute("width",e+"px"),n.setAttribute("height",i+"px"),s=(new XMLSerializer).serializeToString(s),t=new Blob([s],{type:"image/svg+xml"}),A(t)}function w(t){do{if(t.parentNode&&t.hasAttribute("contenteditable"))return!0}while(t=t.parentNode);return!1}const D1=new Set(["input","textarea","datalist","select"]),E1=new Set(["canvas","body","html"]);function z(t){E1.has(t.target.tagName.toLowerCase())&&t.preventDefault()}function J(t){(t.metaKey||t.ctrlKey)&&t.preventDefault()}self.C3_GetSvgImageSize=async function(t){if(0<(t=await A(t)).width&&0<t.height)return[t.width,t.height];t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.visibility="hidden",document.body.appendChild(t);var e=t.getBoundingClientRect();return document.body.removeChild(t),[e.width,e.height]};let t=!(self.C3_RasterSvgImageBlob=async function(t,e,i,s,n){t=await v(t,e,i);const a=document.createElement("canvas");return a.width=s,a.height=n,a.getContext("2d").drawImage(t,0,0,e,i),a});function M(){try{return window.parent&&window.parent.document.hasFocus()}catch(t){return!1}}document.addEventListener("pause",()=>t=!0),document.addEventListener("resume",()=>t=!1),A1.Ta(class extends self.Ba{constructor(t){super(t,"runtime"),this.Sd=!0,this.Qa=-1,this.dd="any",this.Jd=this.Kd=!1,this.Ja=this.sb=this.ya=null,this.ac=this.$b=0,t.C("canvas","update-size",t=>this.Nf(t)),t.C("runtime","invoke-download",t=>this.Af(t)),t.C("runtime","raster-svg-image",t=>this.Hf(t)),t.C("runtime","get-svg-image-size",t=>this.yf(t)),t.C("runtime","set-target-orientation",t=>this.Lf(t)),t.C("runtime","register-sw",()=>this.If()),t.C("runtime","post-to-debugger",t=>this.Ed(t)),t.C("runtime","go-to-script",t=>this.Ed(t)),t.C("runtime","before-start-ticking",()=>this.pf()),t.C("runtime","debug-highlight",t=>this.sf(t)),t.C("runtime","enable-device-orientation",()=>this.Ve()),t.C("runtime","enable-device-motion",()=>this.Ue()),t.C("runtime","add-stylesheet",t=>this.nf(t)),t.C("runtime","alert",t=>this.Ec(t)),t.C("runtime","hide-cordova-splash",()=>this.zf());const i=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",t=>{const e=t.target;i.has(e.tagName.toLowerCase())||w(e)||t.preventDefault()});const e=t.G;window.addEventListener("selectstart",z),window.addEventListener("gesturehold",z),e.addEventListener("selectstart",z),e.addEventListener("gesturehold",z),window.addEventListener("touchstart",z,{passive:!1}),"undefined"!=typeof PointerEvent?(window.addEventListener("pointerdown",z,{passive:!1}),e.addEventListener("pointerdown",z)):e.addEventListener("touchstart",z),this.pb=0,window.addEventListener("mousedown",t=>{1===t.button&&t.preventDefault()}),window.addEventListener("mousewheel",J,{passive:!1}),window.addEventListener("wheel",J,{passive:!1}),window.addEventListener("resize",()=>this.Of()),window.addEventListener("fullscreenchange",()=>this.Ya()),window.addEventListener("webkitfullscreenchange",()=>this.Ya()),window.addEventListener("mozfullscreenchange",()=>this.Ya()),window.addEventListener("fullscreenerror",t=>this.Gc(t)),window.addEventListener("webkitfullscreenerror",t=>this.Gc(t)),window.addEventListener("mozfullscreenerror",t=>this.Gc(t)),t.qc()&&window.addEventListener("focusout",()=>{{const i=document.activeElement;var t,e;e=!!i&&(e=i.tagName.toLowerCase(),t=new Set("email number password search tel text url".split(" ")),"textarea"===e||("input"===e?t.has(i.type.toLowerCase()||"text"):w(i)))}e||(document.scrollingElement.scrollTop=0)}),self.C3WrapperOnMessage=t=>this.Pf(t),this.La=new Set,this.Wb=new WeakSet,this.oa=!1}pf(){return"cordova"===this.v.s?(document.addEventListener("pause",()=>this.Kc(!0)),document.addEventListener("resume",()=>this.Kc(!1))):document.addEventListener("visibilitychange",()=>this.Kc(document.hidden)),{isSuspended:!(!document.hidden&&!t)}}jd(){window.addEventListener("focus",()=>this.$a("window-focus")),window.addEventListener("blur",()=>{this.$a("window-blur",{parentHasFocus:M()}),this.pb=0}),window.addEventListener("focusin",t=>{t=t.target,(D1.has(t.tagName.toLowerCase())||w(t))&&this.$a("keyboard-blur")}),window.addEventListener("keydown",t=>this.Dd("keydown",t)),window.addEventListener("keyup",t=>this.Dd("keyup",t)),window.addEventListener("dblclick",t=>this.Hc("dblclick",t,B1)),window.addEventListener("wheel",t=>this.Ef(t)),"undefined"!=typeof PointerEvent?(window.addEventListener("pointerdown",t=>{this.Bc(t),this.Za("pointerdown",t)}),this.v.ca&&void 0!==window.onpointerrawupdate&&self===self.top?(this.sb=new self.Ke(()=>this.df(),5),this.sb.Nd=!0,window.addEventListener("pointerrawupdate",t=>this.Ff(t))):window.addEventListener("pointermove",t=>this.Za("pointermove",t)),window.addEventListener("pointerup",t=>this.Za("pointerup",t)),window.addEventListener("pointercancel",t=>this.Za("pointercancel",t))):(window.addEventListener("mousedown",t=>{this.Bc(t),this.Ic("pointerdown",t)}),window.addEventListener("mousemove",t=>this.Ic("pointermove",t)),window.addEventListener("mouseup",t=>this.Ic("pointerup",t)),window.addEventListener("touchstart",t=>{this.Bc(t),this.Hb("pointerdown",t)}),window.addEventListener("touchmove",t=>this.Hb("pointermove",t)),window.addEventListener("touchend",t=>this.Hb("pointerup",t)),window.addEventListener("touchcancel",t=>this.Hb("pointercancel",t)));var t=()=>this.Lc();window.addEventListener("pointerup",t,!0),window.addEventListener("touchend",t,!0),window.addEventListener("click",t,!0),window.addEventListener("keydown",t,!0),window.addEventListener("gamepadconnected",t,!0)}$a(t,e){u(this,t,e||null,m)}wa(){return this.v.wa()}va(){return this.v.va()}Of(){var t=this.wa(),e=this.va();this.$a("window-resize",{innerWidth:t,innerHeight:e,devicePixelRatio:window.devicePixelRatio,isFullscreen:A1.Wa()}),this.v.qc()&&(-1!==this.Qa&&clearTimeout(this.Qa),this.Fd(t,e,0))}Xf(t,e,i){-1!==this.Qa&&clearTimeout(this.Qa),this.Qa=setTimeout(()=>this.Fd(t,e,i),48)}Fd(t,e,i){var s=this.wa(),n=this.va();this.Qa=-1,s!=t||n!=e?this.$a("window-resize",{innerWidth:s,innerHeight:n,devicePixelRatio:window.devicePixelRatio,isFullscreen:A1.Wa()}):i<10&&this.Xf(s,n,i+1)}Lf(t){this.dd=t.targetOrientation}pg(){var e=this.dd;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(t=>console.warn("[Construct 3] Failed to lock orientation: ",t));else try{let t=!1;screen.lockOrientation?t=screen.lockOrientation(e):screen.webkitLockOrientation?t=screen.webkitLockOrientation(e):screen.mozLockOrientation?t=screen.mozLockOrientation(e):screen.msLockOrientation&&(t=screen.msLockOrientation(e)),t||console.warn("[Construct 3] Failed to lock orientation")}catch(t){console.warn("[Construct 3] Failed to lock orientation: ",t)}}Ya(){var t=A1.Wa();t&&"any"!==this.dd&&this.pg(),u(this,"fullscreenchange",{isFullscreen:t,innerWidth:this.wa(),innerHeight:this.va()})}Gc(t){console.warn("[Construct 3] Fullscreen request failed: ",t),u(this,"fullscreenerror",{isFullscreen:A1.Wa(),innerWidth:this.wa(),innerHeight:this.va()})}Kc(t){t?this.v.xc():this.v.Mc(),u(this,"visibilitychange",{hidden:t})}Dd(t,e){"Backspace"===e.key&&z(e),F(this,t,{code:b.get(e.code)||e.code,key:e.key,which:e.which,repeat:e.repeat,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,timeStamp:e.timeStamp},B1)}Ef(t){u(this,"wheel",{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,deltaMode:t.deltaMode,timeStamp:t.timeStamp},B1)}Hc(t,e,i){a(e)||F(this,t,{button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,movementX:e.movementX||0,movementY:e.movementY||0,timeStamp:e.timeStamp},i)}Ic(t,e){var i;a(e)||(i=this.pb,F(this,t="pointerdown"===t&&0!==i||"pointerup"===t&&0!==e.buttons?"pointermove":t,{pointerId:1,pointerType:"mouse",button:e.button,buttons:e.buttons,lastButtons:i,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,movementX:e.movementX||0,movementY:e.movementY||0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:e.timeStamp},B1),this.pb=e.buttons,this.Hc(e.type,e,C1))}Za(t,e){var i;this.sb&&"pointermove"!==t&&((i=this.sb).hb||(L(i),i.Tb=Date.now())),i=0,"mouse"===e.pointerType&&(i=this.pb),F(this,t,{pointerId:e.pointerId,pointerType:e.pointerType,button:e.button,buttons:e.buttons,lastButtons:i,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,movementX:(e.movementX||0)+this.$b,movementY:(e.movementY||0)+this.ac,width:e.width||0,height:e.height||0,pressure:e.pressure||0,tangentialPressure:e.tangentialPressure||0,tiltX:e.tiltX||0,tiltY:e.tiltY||0,twist:e.twist||0,timeStamp:e.timeStamp},B1),this.ac=this.$b=0,"mouse"===e.pointerType&&(i="mousemove","pointerdown"===t?i="mousedown":"pointerup"===t&&(i="mouseup"),this.Hc(i,e,C1),this.pb=e.buttons)}Ff(t){var e,i,s;this.Ja&&(this.$b+=this.Ja.movementX||0,this.ac+=this.Ja.movementY||0),this.Ja=t,-1===(t=this.sb).Ra&&(i=(e=Date.now())-t.Tb,(s=t.vg)<=i&&t.Nd?(t.Tb=e,t.hb=!0,t.Qc(),t.hb=!1):t.Ra=self.setTimeout(t.ee,Math.max(s-i,4)))}df(){this.Za("pointermove",this.Ja),this.Ja=null}Hb(i,s){for(let t=0,e=s.changedTouches.length;t<e;++t){var n=s.changedTouches[t];F(this,i,{pointerId:n.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,movementX:s.movementX||0,movementY:s.movementY||0,width:2*(n.radiusX||n.webkitRadiusX||0),height:2*(n.radiusY||n.webkitRadiusY||0),pressure:n.force||n.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:n.rotationAngle||0,timeStamp:s.timeStamp},B1)}}Bc(t){window!==window.top&&window.focus(),this.Bd(t.target)&&document.activeElement&&!this.Bd(document.activeElement)&&document.activeElement.blur()}Bd(t){return!t||t===document||t===window||t===document.body||"canvas"===t.tagName.toLowerCase()}Ve(){this.Kd||(this.Kd=!0,window.addEventListener("deviceorientation",t=>this.uf(t)),window.addEventListener("deviceorientationabsolute",t=>this.vf(t)))}Ue(){this.Jd||(this.Jd=!0,window.addEventListener("devicemotion",t=>this.tf(t)))}uf(t){u(this,"deviceorientation",{absolute:!!t.absolute,alpha:t.alpha||0,beta:t.beta||0,gamma:t.gamma||0,timeStamp:t.timeStamp,webkitCompassHeading:t.webkitCompassHeading,webkitCompassAccuracy:t.webkitCompassAccuracy},B1)}vf(t){u(this,"deviceorientationabsolute",{absolute:!!t.absolute,alpha:t.alpha||0,beta:t.beta||0,gamma:t.gamma||0,timeStamp:t.timeStamp},B1)}tf(t){let e=null;(i=t.acceleration)&&(e={x:i.x||0,y:i.y||0,z:i.z||0});var i=null;(s=t.accelerationIncludingGravity)&&(i={x:s.x||0,y:s.y||0,z:s.z||0});var s=null,n=t.rotationRate;n&&(s={alpha:n.alpha||0,beta:n.beta||0,gamma:n.gamma||0}),u(this,"devicemotion",{acceleration:e,accelerationIncludingGravity:i,rotationRate:s,interval:t.interval,timeStamp:t.timeStamp},B1)}Nf(t){const e=this.v.G;e.style.width=t.styleWidth+"px",e.style.height=t.styleHeight+"px",e.style.marginLeft=t.marginLeft+"px",e.style.marginTop=t.marginTop+"px",this.Sd&&(e.style.display="",this.Sd=!1)}Af(t){var e=t.url;t=t.filename;const i=document.createElement("a"),s=document.body;i.textContent=t,i.href=e,i.download=t,s.appendChild(i),i.click(),s.removeChild(i)}async Hf(t){var e=t.imageBitmapOpts;return t=await self.C3_RasterSvgImageBlob(t.blob,t.imageWidth,t.imageHeight,t.surfaceWidth,t.surfaceHeight),{imageBitmap:e=e?await createImageBitmap(t,e):await createImageBitmap(t),transferables:[e]}}async yf(t){return self.C3_GetSvgImageSize(t.blob)}async nf(t){await p(t.url)}Lc(){var t=[...this.La];if(this.La.clear(),!this.oa)for(const e of t)(t=e.play())&&t.catch(()=>{this.Wb.has(e)||this.La.add(e)})}ua(e){if("function"!=typeof e.play)throw Error("missing play function");this.Wb.delete(e);let t;try{t=e.play()}catch(t){return void this.La.add(e)}t&&t.catch(()=>{this.Wb.has(e)||this.La.add(e)})}Da(t){this.La.delete(t),this.Wb.add(t)}Db(t){this.oa=!!t}zf(){navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()}sf(t){var e;t.show?(this.ya||(this.ya=document.createElement("div"),this.ya.id="inspectOutline",document.body.appendChild(this.ya)),(e=this.ya).style.display="",e.style.left=t.left-1+"px",e.style.top=t.top-1+"px",e.style.width=t.width+2+"px",e.style.height=t.height+2+"px",e.textContent=t.name):this.ya&&(this.ya.style.display="none")}If(){window.C3_RegisterSW&&window.C3_RegisterSW()}Ed(t){window.c3_postToMessagePort&&(t.from="runtime",window.c3_postToMessagePort(t))}lf(t,e){return this.v.rd(this.bb,"js-invoke-function",{name:t,params:e},void 0,void 0)}Ec(t){alert(t.message)}Pf(t){"entered-fullscreen"===t?(A1.Kb(!0),this.Ya()):"exited-fullscreen"===t?(A1.Kb(!1),this.Ya()):console.warn("Unknown wrapper message: ",t)}})}async function O(t){if(t.ug)throw Error("already initialised");t.ug=!0;var e=t.dc.Ac("dispatchworker.js");t.Sc=await t.dc.kc(e,t.F,{name:"DispatchWorker"}),e=new MessageChannel,t.Wc=e.port1,t.Sc.postMessage({type:"_init","in-port":e.port2},[e.port2]),t.bd=await Q(t)}function P(t){return[t.Wc,t.bd]}async function Q(t){var e=t.Td.length,i=t.dc.Ac("jobworker.js"),i=await t.dc.kc(i,t.F,{name:"JobWorker"+e}),s=new MessageChannel,n=new MessageChannel;return t.Sc.postMessage({type:"_addJobWorker",port:s.port1},[s.port1]),i.postMessage({type:"init",number:e,"dispatch-port":s.port2,"output-port":n.port2},[s.port2,n.port2]),t.Td.push(i),n.port1}self.Ge=class{constructor(t){this.dc=t,this.F=t.F,this.F="preview"===t.s?this.F+"workers/":this.F+t.ec,this.xg=Math.min(navigator.hardwareConcurrency||2,16),this.Sc=null,this.Td=[],this.bd=this.Wc=null}},console.log("TEST"),window.C3_IsSupported&&(window.c3_runtimeInterface=new self.ma({Mg:!1,Ng:"workermain.js",Sa:["scripts/c3runtime.js"],ic:[],fd:"",Jg:"scripts/",hd:[],fe:"html5"}));{const Jd=180/Math.PI;self.da=class extends self.Ba{constructor(t){super(t,"audio"),this.Pb=this.f=null,this.Rb=this.Vc=!1,this.ra=()=>this.qg(),this.$=[],this.D=[],this.ga=null,this.Ud="",this.Vd=-1,this.rb=new Map,this.Zc=1,this.oa=!1,this.ed=0,this.fc=1,this.Tc=0,this.Xd="HRTF",this.Od="inverse",this.Yd=600,this.Wd=1e4,this.$d=1,this.Qd=this.cd=!1,this.ce=this.v.Ee(),this.aa=new Map,this.Ha=new Set,this.Xc=!1,this.$c="",this.za=null,self.C3Audio_OnMicrophoneStream=(t,e)=>this.Df(t,e),this.Ob=null,self.C3Audio_GetOutputStream=()=>this.xf(),I(self.C3Audio_DOMInterface=this,[["create-audio-context",t=>this.$e(t)],["play",t=>this.Rf(t)],["stop",t=>this.ng(t)],["stop-all",()=>this.og()],["set-paused",t=>this.gg(t)],["set-volume",t=>this.lg(t)],["fade-volume",t=>this.ef(t)],["set-master-volume",t=>this.eg(t)],["set-muted",t=>this.fg(t)],["set-silent",t=>this.ig(t)],["set-looping",t=>this.dg(t)],["set-playback-rate",t=>this.hg(t)],["seek",t=>this.Yf(t)],["preload",t=>this.Sf(t)],["unload",t=>this.rg(t)],["unload-all",()=>this.sg()],["set-suspended",t=>this.jg(t)],["add-effect",t=>this.wd(t)],["set-effect-param",t=>this.ag(t)],["remove-effects",t=>this.Uf(t)],["tick",t=>this.Mf(t)],["load-state",t=>this.Bf(t)]])}async $e(t){t.isiOSCordova&&(this.cd=!0),this.ed=t.timeScaleMode,this.Xd=["equalpower","HRTF","soundfield"][t.panningModel],this.Od=["linear","inverse","exponential"][t.distanceModel],this.Yd=t.refDistance,this.Wd=t.maxDistance,this.$d=t.rolloffFactor;var e={latencyHint:t.latencyHint};if(this.ce||(e.sampleRate=48e3),"undefined"!=typeof AudioContext)this.f=new AudioContext(e);else{if("undefined"==typeof webkitAudioContext)throw Error("Web Audio API not supported");this.f=new webkitAudioContext(e)}this.xd(),this.f.onstatechange=()=>{"running"!==this.f.state&&this.xd()},this.Pb=this.f.createGain(),this.Pb.connect(this.f.destination),e=t.listenerPos,this.f.listener.setPosition(e[0],e[1],e[2]),this.f.listener.setOrientation(0,0,1,0,-1,0),self.C3_GetAudioContextCurrentTime=()=>this.lc();try{await Promise.all(t.preloadList.map(t=>this.Fb(t.originalUrl,t.url,t.type,!1)))}catch(t){console.error("[Construct 3] Preloading sounds failed: ",t)}return{sampleRate:this.f.sampleRate}}xd(){this.Rb||(this.Vc=!1,window.addEventListener("pointerup",this.ra,!0),window.addEventListener("touchend",this.ra,!0),window.addEventListener("click",this.ra,!0),window.addEventListener("keydown",this.ra,!0),this.Rb=!0)}bf(){this.Rb&&(this.Vc=!0,window.removeEventListener("pointerup",this.ra,!0),window.removeEventListener("touchend",this.ra,!0),window.removeEventListener("click",this.ra,!0),window.removeEventListener("keydown",this.ra,!0),this.Rb=!1)}qg(){var t,e,i;this.Vc||("suspended"===(t=this.f).state&&t.resume&&t.resume(),e=t.createBuffer(1,220,22050),(i=t.createBufferSource()).buffer=e,i.connect(t.destination),i.start(0),"running"===t.state&&this.bf())}W(){return this.f}lc(){return this.f.currentTime}sa(){return this.Pb}od(t){return(t=this.aa.get(t.toLowerCase()))?t[0].P():this.sa()}ge(t,e){t=t.toLowerCase();let i=this.aa.get(t);i||(i=[],this.aa.set(t,i)),e.cg(i.length),e.kg(t),i.push(e),this.Hd(t)}Hd(t){let e=this.sa();const i=this.aa.get(t);if(i&&i.length){e=i[0].P();for(let t=0,e=i.length;t<e;++t){const s=i[t];t+1===e?s.S(this.sa()):s.S(i[t+1].P())}}for(const n of this.la(t))n.Le(e);this.za&&this.$c===t&&(this.za.disconnect(),this.za.connect(e))}zb(){return this.Zc}Ab(){return this.oa}bg(){this.Qd=!0}ye(i,t){return t?this.v.tg(i).then(t=>{const e=this.f.createBuffer(1,t.length,48e3);return e.getChannelData(0).set(t),e}):new Promise((t,e)=>{this.f.decodeAudioData(i,t,e)})}ua(t){this.v.ua(t)}Da(t){this.v.Da(t)}sd(i){let s=0;for(let t=0,e=this.D.length;t<e;++t){const n=this.D[t];this.D[s]=n,n.L===i?n.c():++s}this.D.length=s}Me(){let i=0;for(let t=0,e=this.$.length;t<e;++t){const s=this.$[t];this.$[i]=s,s.ta()?s.c():++i}this.$.length=i}*la(t){if(t)for(const e of this.D)self.da.ze(e.Y,t)&&(yield e);else this.ga&&!this.ga.T()&&(yield this.ga)}async Fb(t,e,i,s,n){for(const a of this.$)if(a.Va()===e)return await R(a),a;return n?null:(s&&(this.cd||this.Qd)&&this.Me(),n="audio/webm; codecs=opus"===i&&!this.ce,s&&n&&this.bg(),t=!s||this.cd||n?new self.ue(this,t,e,i,s,n):new self.se(this,t,e,i,s),this.$.push(t),await R(t),t)}async zc(t,e,i,s,n){for(const a of this.D)if(a.Va()===e&&(a.jc()||n))return a.Oe(s),a;return s=new("html5"===(t=await this.Fb(t,e,i,n)).Oc?self.te:self.ve)(t.i,t,s),this.D.push(s),s}Se(t){let i=this.rb.get(t);if(!i){let e=null;i={gd:0,Ig:new Promise(t=>e=t),resolve:e},this.rb.set(t,i)}i.gd++}Vf(t){const e=this.rb.get(t);if(!e)throw Error("expected pending tag");e.gd--,0===e.gd&&(e.resolve(),this.rb.delete(t))}wc(t){return t=t||this.Ud,(t=this.rb.get(t))?t.Ig:Promise.resolve()}Gb(){if(0<this.Ha.size)K(this);else for(const t of this.D)if(t.pd()){K(this);break}}Ea(){for(var t of this.Ha)t.Ea();t=this.lc();for(var e of this.D)e.Ea(t);e=this.D.filter(t=>t.pd()).map(t=>t.Ua()),u(this,"state",{tickCount:this.Vd,audioInstances:e,analysers:[...this.Ha].map(t=>t.Be())}),0===e.length&&0===this.Ha.size&&this.Sb&&(this.v.Wf(this.de),this.Sb=!1)}sc(t,e,i){u(this,"trigger",{type:t,tag:e,aiid:i})}async Rf(t){const e=t.originalUrl,i=t.url,s=t.type,n=t.isMusic,a=t.tag,h=t.isLooping,r=t.vol,o=t.pos,c=t.panning;let l=t.off;0<l&&!t.trueClock&&(l=this.f.getOutputTimestamp?(t=this.f.getOutputTimestamp(),l-t.performanceTime/1e3+t.contextTime):l-performance.now()/1e3+this.f.currentTime),this.Ud=a,this.Se(a);try{this.ga=await this.zc(e,i,s,a,n),c?(this.ga.Cb(!0),this.ga.Ne(c.x,c.y,c.angle,c.innerAngle,c.outerAngle,c.outerGain),c.hasOwnProperty("uid")&&this.ga.Pe(c.uid)):this.ga.Cb(!1),this.ga.Play(h,r,o,l)}catch(t){return void console.error("[Construct 3] Audio: error starting playback: ",t)}finally{this.Vf(a)}K(this)}ng(t){t=t.tag;for(const e of this.la(t))e.na()}og(){for(const t of this.D)t.na()}gg(t){var e=t.tag;t=t.paused;for(const i of this.la(e))t?i.Xa():i.Bb();this.Gb()}lg(t){var e=t.tag;t=t.vol;for(const i of this.la(e))i.Eb(t)}async ef(t){var e=t.tag,i=t.vol,s=t.duration;t=t.stopOnEnd,await this.wc(e);for(const n of this.la(e))n.Ae(i,s,t);this.Gb()}eg(t){this.Zc=t.vol;for(const e of this.D)e.Mb()}fg(t){var e=t.tag;t=t.isMuted;for(const i of this.la(e))i.td(t)}ig(t){this.oa=t.isSilent,this.v.Db(this.oa);for(const e of this.D)e.Lb()}dg(t){var e=t.tag;t=t.isLooping;for(const i of this.la(e))i.uc(t)}async hg(t){var e=t.tag;t=t.rate,await this.wc(e);for(const i of this.la(e))i.vd(t)}async Yf(t){var e=t.tag;t=t.pos,await this.wc(e);for(const i of this.la(e))i.tc(t)}async Sf(t){var e=t.originalUrl,i=t.url,s=t.type;t=t.isMusic;try{await this.zc(e,i,s,"",t)}catch(t){console.error("[Construct 3] Audio: error preloading: ",t)}}async rg(t){(t=await this.Fb("",t.url,t.type,t.isMusic,!0))&&(t.c(),-1!==(t=this.$.indexOf(t))&&this.$.splice(t,1))}sg(){for(const t of this.$)t.c();this.$.length=0}jg(t){!(t=t.isSuspended)&&this.f.resume&&this.f.resume();for(const e of this.D)e.vc(t);t&&this.f.suspend&&this.f.suspend()}Mf(t){if(this.fc=t.timeScale,this.Tc=t.gameTime,this.Vd=t.tickCount,0!==this.ed)for(var e of this.D)e.Ga();(e=t.listenerPos)&&this.f.listener.setPosition(e[0],e[1],e[2]);for(const i of t.instPans){t=i.uid;for(const s of this.D)s.fa===t&&s.ud(i.x,i.y,i.angle)}}async wd(t){var e=t.type,i=t.tag,s=t.params;if("filter"===e)s=new self.me(this,...s);else if("delay"===e)s=new self.ke(this,...s);else if("convolution"===e){e=null;try{e=await this.Fb(t.bufferOriginalUrl,t.bufferUrl,t.bufferType,!1)}catch(t){return void console.log("[Construct 3] Audio: error loading convolution: ",t)}(s=new self.je(this,e.Z,...s)).Zf(t.bufferOriginalUrl,t.bufferType)}else if("flanger"===e)s=new self.ne(this,...s);else if("phaser"===e)s=new self.pe(this,...s);else if("gain"===e)s=new self.oe(this,...s);else if("tremolo"===e)s=new self.re(this,...s);else if("ringmod"===e)s=new self.qe(this,...s);else if("distortion"===e)s=new self.le(this,...s);else if("compressor"===e)s=new self.ie(this,...s);else{if("analyser"!==e)throw Error("invalid effect type");s=new self.he(this,...s)}this.ge(i,s),this.Gd()}ag(t){var e=t.index,i=t.param,s=t.value,n=t.ramp,a=t.time;!(t=this.aa.get(t.tag))||e<0||e>=t.length||(t[e].X(i,s,n,a),this.Gd())}Uf(t){t=t.tag.toLowerCase();var e=this.aa.get(t);if(e&&e.length){for(const i of e)i.c();this.aa.delete(t),this.Hd(t)}}Re(t){this.Ha.add(t),this.Gb()}Tf(t){this.Ha.delete(t)}Gd(){this.Xc||(this.Xc=!0,Promise.resolve().then(()=>this.cf()))}cf(){const t={};for(var[e,i]of this.aa)t[e]=i.map(t=>t.Ua());u(this,"fxstate",{fxstate:t}),this.Xc=!1}async Bf(t){const e=t.saveLoadMode;if(3!==e)for(var i of this.D)i.ta()&&1===e||!i.ta()&&2===e||i.na();for(const s of this.aa.values())for(const n of s)n.c();this.aa.clear(),this.fc=t.timeScale,this.Tc=t.gameTime,i=t.listenerPos,this.f.listener.setPosition(i[0],i[1],i[2]),this.oa=t.isSilent,this.v.Db(this.oa),this.Zc=t.masterVolume,i=[];for(const a of Object.values(t.effects))i.push(Promise.all(a.map(t=>this.wd(t))));await Promise.all(i),await Promise.all(t.playing.map(t=>this.mf(t,e))),this.Gb()}async mf(t,e){if(3!==e){var i=t.bufferOriginalUrl,s=t.bufferUrl,n=t.bufferType,a=t.isMusic,h=t.tag,r=t.isLooping,o=t.volume,c=t.playbackTime;if((!a||1!==e)&&(a||2!==e)){e=null;try{e=await this.zc(i,s,n,h,a)}catch(t){return void console.error("[Construct 3] Audio: error loading audio state: ",t)}e.Je(t.pan),e.Play(r,o,c,0),t.isPlaying||e.Xa(),e.Dc(t)}}}Df(t,e){this.za&&this.za.disconnect(),this.$c=e.toLowerCase(),this.za=this.f.createMediaStreamSource(t),this.za.connect(this.od(this.$c))}xf(){return this.Ob||(this.Ob=this.f.createMediaStreamDestination(),this.Pb.connect(this.Ob)),this.Ob.stream}static ze(t,e){return t.length===e.length&&(t===e||t.toLowerCase()===e.toLowerCase())}static Qe(t){return t*Jd}static xe(t){return Math.pow(10,t/20)}static nd(t){return Math.max(Math.min(self.da.xe(t),1),0)}static Ie(t){return Math.log(t)/Math.log(10)*20}static He(t){return self.da.Ie(Math.max(Math.min(t,1),0))}static Dg(t,e){return 1-Math.exp(-e*t)}},self.ma.Ta(self.da)}function R(t){return t.Ub||(t.Ub=t.Cc()),t.Ub}async function S(t){if(t.xa)return t.xa;var e=t.i.v;if("cordova"===e.s&&e.qd(t.Aa)&&e.ib)t.xa=await e.xb(t.Aa);else{if(!(e=await fetchLocal(t.Aa)).ok)throw Error(`error fetching audio data: ${e.status} `+e.statusText);t.xa=await e.arrayBuffer()}}async function T(t){if(t.Z)return t.Z;t.Z=await t.i.ye(t.xa,t.yg),t.xa=null}self.kd=class{constructor(t,e,i,s,n){this.i=t,this.zg=e,this.Aa=i,this.R=s,this.wg=n,this.Oc="",this.Ub=null}c(){this.Ub=this.i=null}Cc(){}W(){return this.i.W()}nc(){return this.zg}Va(){return this.Aa}mc(){return this.R}ta(){return this.wg}ea(){}},self.se=class extends self.kd{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Oc="html5",this.K=new Audio,this.K.crossOrigin="anonymous",this.K.autoplay=!1,this.K.preload="auto",this.lb=this.mb=null,this.K.addEventListener("canplaythrough",()=>!0),this.qb=this.W().createGain(),this.ob=null,this.K.addEventListener("canplay",()=>{this.mb&&(this.mb(),this.lb=this.mb=null),!this.ob&&this.K&&(this.ob=this.W().createMediaElementSource(this.K),this.ob.connect(this.qb))}),this.onended=null,this.K.addEventListener("ended",()=>{this.onended&&this.onended()}),this.K.addEventListener("error",t=>{console.error(`[Construct 3] Audio '${this.Aa}' error: `,t),this.lb&&(this.lb(t),this.lb=this.mb=null)})}c(){this.i.sd(this),this.qb.disconnect(),this.qb=null,this.ob.disconnect(),this.ob=null,this.K&&!this.K.paused&&this.K.pause(),this.K=this.onended=null,super.c()}Cc(){return new Promise((t,e)=>{this.mb=t,this.lb=e,this.K.src=this.Aa})}O(){return this.K}ea(){return this.K.duration}},self.ue=class extends self.kd{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.Oc="webaudio",this.Z=this.xa=null,this.yg=!!a}c(){this.i.sd(this),this.Z=this.xa=null,super.c()}async Cc(){try{await S(this),await T(this)}catch(t){console.error(`[Construct 3] Failed to load audio '${this.Aa}': `,t)}}ea(){return this.Z?this.Z.duration:0}};{let s=0;self.ld=class{constructor(t,e,i){this.i=t,this.L=e,this.Y=i,this.Nb=s++,this.M=this.W().createGain(),this.M.connect(this.sa()),this.B=null,this.jb=!1,this.ja=[0,0,0],this.ia=[0,0,0],this.I=!0,this.V=this.ka=this.H=!1,this.ub=1,this.Ia=!1,this.qa=1,t=this.i.ed,this.Yc=1===t&&!this.ta()||2===t,this.fb=this.fa=-1,this.be=!1}c(){this.L=this.i=null,this.B&&(this.B.disconnect(),this.B=null),this.M.disconnect(),this.M=null}W(){return this.i.W()}sa(){return this.i.od(this.Y)}zb(){return this.i.zb()}yb(){return this.Yc?this.i.Tc:performance.now()/1e3}nc(){return this.L.nc()}Va(){return this.L.Va()}mc(){return this.L.mc()}ta(){return this.L.ta()}Oe(t){this.Y=t}T(){}jc(){}IsPlaying(){return!this.I&&!this.H&&!this.T()}pd(){return!this.I&&!this.T()}Ca(){}ea(){return this.L.ea()}Play(){}na(){}Xa(){}Bb(){}Eb(t){this.ub=t,this.M.gain.cancelScheduledValues(0),this.fb=-1,this.M.gain.value=this.oc()}Ae(t,e,i){var s,n;this.Ia||(t*=this.zb(),(s=this.M.gain).cancelScheduledValues(0),e=(n=this.i.lc())+e,s.setValueAtTime(s.value,n),s.linearRampToValueAtTime(t,e),this.ub=t,this.fb=e,this.be=i)}Mb(){this.Eb(this.ub)}Ea(t){-1!==this.fb&&t>=this.fb&&(this.fb=-1,this.be&&this.na(),this.i.sc("fade-ended",this.Y,this.Nb))}oc(){var t=this.ub*this.zb();return isFinite(t)?t:0}td(t){this.Ia!==(t=!!t)&&(this.Ia=t,this.Lb())}Ab(){return this.i.Ab()}Lb(){}uc(){}vd(t){this.qa!==t&&(this.qa=t,this.Ga())}Ga(){}tc(){}vc(){}Cb(t){this.jb!==(t=!!t)&&((this.jb=t)?(this.B||(this.B=this.W().createPanner(),this.B.panningModel=this.i.Xd,this.B.distanceModel=this.i.Od,this.B.refDistance=this.i.Yd,this.B.maxDistance=this.i.Wd,this.B.rolloffFactor=this.i.$d),this.M.disconnect(),this.M.connect(this.B),this.B.connect(this.sa())):(this.B.disconnect(),this.M.disconnect(),this.M.connect(this.sa())))}Ne(t,e,i,s,n,a){this.jb&&(this.ud(t,e,i),t=self.da.Qe,this.B.coneInnerAngle=t(s),this.B.coneOuterAngle=t(n),this.B.coneOuterGain=a)}ud(t,e,i){this.jb&&(this.ja[0]=t,this.ja[1]=e,this.ja[2]=0,this.ia[0]=Math.cos(i),this.ia[1]=Math.sin(i),this.ia[2]=0,this.B.setPosition(...this.ja),this.B.setOrientation(...this.ia))}Pe(t){this.fa=t}pc(){}Le(t){const e=this.B||this.M;e.disconnect(),e.connect(t)}Ua(){return{aiid:this.Nb,tag:this.Y,duration:this.ea(),volume:this.ub,isPlaying:this.IsPlaying(),playbackTime:this.Ca(),playbackRate:this.qa,uid:this.fa,bufferOriginalUrl:this.nc(),bufferUrl:"",bufferType:this.mc(),isMusic:this.ta(),isLooping:this.V,isMuted:this.Ia,resumePosition:this.pc(),pan:this.Ce()}}Dc(t){this.vd(t.playbackRate),this.td(t.isMuted)}Ce(){if(!this.B)return null;var t=this.B;return{pos:this.ja,orient:this.ia,cia:t.coneInnerAngle,coa:t.coneOuterAngle,cog:t.coneOuterGain,uid:this.fa}}Je(t){var e;t?(this.Cb(!0),e=(t=this.B).pos,this.ja[0]=e[0],this.ja[1]=e[1],this.ja[2]=e[2],e=t.orient,this.ia[0]=e[0],this.ia[1]=e[1],this.ia[2]=e[2],t.setPosition(...this.ja),t.setOrientation(...this.ia),t.coneInnerAngle=t.cia,t.coneOuterAngle=t.coa,t.coneOuterGain=t.cog,this.fa=t.uid):this.Cb(!1)}}}function U(t){t.j&&t.j.disconnect(),t.j=null,t.ab=null}self.te=class extends self.ld{constructor(t,e,i){super(t,e,i),this.L.qb.connect(this.M),this.L.onended=()=>this.Fc()}c(){this.na(),this.L.qb.disconnect(),super.c()}O(){return this.L.O()}Fc(){this.I=!0,this.fa=-1,this.i.sc("ended",this.Y,this.Nb)}T(){return this.O().ended}jc(){return!!this.I||this.T()}Ca(){let t=this.O().currentTime;return this.V||(t=Math.min(t,this.ea())),t}Play(t,e,i){const s=this.O();if(1!==s.playbackRate&&(s.playbackRate=1),s.loop!==t&&(s.loop=t),this.Eb(e),s.muted&&(s.muted=!1),s.currentTime!==i)try{s.currentTime=i}catch(t){console.warn(`[Construct 3] Exception seeking audio '${this.L.Va()}' to position '${i}': `,t)}this.i.ua(s),this.H=this.I=!1,this.V=t,this.qa=1}na(){const t=this.O();t.paused||t.pause(),this.i.Da(t),this.I=!0,this.H=!1,this.fa=-1}Xa(){var t;this.H||this.I||this.T()||((t=this.O()).paused||t.pause(),this.i.Da(t),this.H=!0)}Bb(){!this.H||this.I||this.T()||(this.i.ua(this.O()),this.H=!1)}Lb(){this.O().muted=this.Ia||this.Ab()}uc(t){this.V!==(t=!!t)&&(this.V=t,this.O().loop=t)}Ga(){let e=this.qa;this.Yc&&(e*=this.i.fc);try{this.O().playbackRate=e}catch(t){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,t)}}tc(e){if(!this.I&&!this.T())try{this.O().currentTime=e}catch(t){console.warn(`[Construct 3] Error seeking audio to '${e}': `,t)}}pc(){return this.Ca()}vc(t){t?this.IsPlaying()?(this.O().pause(),this.ka=!0):this.ka=!1:this.ka&&(this.i.ua(this.O()),this.ka=!1)}},self.ve=class extends self.ld{constructor(t,e,i){super(t,e,i),this.j=null,this.Xb=t=>this.Fc(t),this.Uc=!0,this.ab=null,this.N=this.Yb=this.Zb=0,this.ad=1}c(){this.na(),U(this),this.Xb=null,super.c()}Fc(t){this.H||this.ka||t.target!==this.ab||(this.I=this.Uc=!0,this.fa=-1,U(this),this.i.sc("ended",this.Y,this.Nb))}T(){return!(!this.I&&this.j&&this.j.loop||this.H)&&this.Uc}jc(){return!(this.j&&!this.I)||this.T()}Ca(){let t;return t=this.H?this.N:this.Yb+(this.yb()-this.Zb)*this.qa,this.V||(t=Math.min(t,this.ea())),t}Play(t,e,i,s){this.ad=1,this.Eb(e),U(this),this.j=this.W().createBufferSource(),this.j.buffer=this.L.Z,this.j.connect(this.M),this.ab=this.j,this.j.onended=this.Xb,this.j.loop=t,this.j.start(s,i),this.H=this.I=this.Uc=!1,this.V=t,this.qa=1,this.Zb=this.yb(),this.Yb=i}na(){if(this.j)try{this.j.stop(0)}catch(t){}this.I=!0,this.H=!1,this.fa=-1}Xa(){this.H||this.I||this.T()||(this.N=this.Ca(),this.V&&(this.N%=this.ea()),this.H=!0,this.j.stop(0))}Bb(){!this.H||this.I||this.T()||(U(this),this.j=this.W().createBufferSource(),this.j.buffer=this.L.Z,this.j.connect(this.M),this.ab=this.j,this.j.onended=this.Xb,this.j.loop=this.V,this.Mb(),this.Ga(),this.j.start(0,this.N),this.Zb=this.yb(),this.Yb=this.N,this.H=!1)}oc(){return super.oc()*this.ad}Lb(){this.ad=this.Ia||this.Ab()?0:1,this.Mb()}uc(t){this.V!==(t=!!t)&&(this.V=t,this.j&&(this.j.loop=t))}Ga(){let t=this.qa;this.Yc&&(t*=this.i.fc),this.j&&(this.j.playbackRate.value=t)}tc(t){this.I||this.T()||(this.H?this.N=t:(this.Xa(),this.N=t,this.Bb()))}pc(){return this.N}vc(t){t?this.IsPlaying()?(this.ka=!0,this.N=this.Ca(),this.V&&(this.N%=this.ea()),this.j.stop(0)):this.ka=!1:this.ka&&(U(this),this.j=this.W().createBufferSource(),this.j.buffer=this.L.Z,this.j.connect(this.M),this.ab=this.j,this.j.onended=this.Xb,this.j.loop=this.V,this.Mb(),this.Ga(),this.j.start(0,this.N),this.Zb=this.yb(),this.Yb=this.N,this.ka=!1)}Dc(t){super.Dc(t),this.N=t.resumePosition}};{class Y5{constructor(t){this.i=t,this.f=t.W(),this.Rd=-1,this.R=this.Y="",this.g=null}c(){this.f=null}cg(t){this.Rd=t}kg(t){this.Y=t}o(){return this.f.createGain()}P(){}S(){}m(t,e,i,s){if(t.cancelScheduledValues(0),0===s)t.value=e;else{var n=this.f.currentTime;switch(s+=n,i){case 0:t.setValueAtTime(e,s);break;case 1:t.setValueAtTime(t.value,n),t.linearRampToValueAtTime(e,s);break;case 2:t.setValueAtTime(t.value,n),t.exponentialRampToValueAtTime(e,s)}}}Ua(){return{type:this.R,tag:this.Y,params:this.g}}}self.me=class extends Y5{constructor(t,e,i,s,n,a,h){super(t),this.R="filter",this.g=[e,i,s,n,a,h],this.l=this.o(),this.b=this.o(),this.b.gain.value=h,this.a=this.o(),this.a.gain.value=1-h,this.A=this.f.createBiquadFilter(),this.A.type=e,this.A.frequency.value=i,this.A.detune.value=s,this.A.Q.value=n,this.A.gain.vlaue=a,this.l.connect(this.A),this.l.connect(this.a),this.A.connect(this.b)}c(){this.l.disconnect(),this.A.disconnect(),this.b.disconnect(),this.a.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[5]=e,this.m(this.b.gain,e,i,s),this.m(this.a.gain,1-e,i,s);break;case 1:this.g[1]=e,this.m(this.A.frequency,e,i,s);break;case 2:this.g[2]=e,this.m(this.A.detune,e,i,s);break;case 3:this.g[3]=e,this.m(this.A.Q,e,i,s);break;case 4:this.g[4]=e,this.m(this.A.gain,e,i,s)}}},self.ke=class extends Y5{constructor(t,e,i,s){super(t),this.R="delay",this.g=[e,i,s],this.l=this.o(),this.b=this.o(),this.b.gain.value=s,this.a=this.o(),this.a.gain.value=1-s,this.nb=this.o(),this.U=this.f.createDelay(e),this.U.delayTime.value=e,this.eb=this.o(),this.eb.gain.value=i,this.l.connect(this.nb),this.l.connect(this.a),this.nb.connect(this.b),this.nb.connect(this.U),this.U.connect(this.eb),this.eb.connect(this.nb)}c(){this.l.disconnect(),this.b.disconnect(),this.a.disconnect(),this.nb.disconnect(),this.U.disconnect(),this.eb.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){const n=self.da.nd;switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[2]=e,this.m(this.b.gain,e,i,s),this.m(this.a.gain,1-e,i,s);break;case 4:this.g[1]=n(e),this.m(this.eb.gain,n(e),i,s);break;case 5:this.g[0]=e,this.m(this.U.delayTime,e,i,s)}}},self.je=class extends Y5{constructor(t,e,i,s){super(t),this.R="convolution",this.g=[i,s],this.Md=this.Ld="",this.l=this.o(),this.b=this.o(),this.b.gain.value=s,this.a=this.o(),this.a.gain.value=1-s,this.cb=this.f.createConvolver(),this.cb.normalize=i,this.cb.buffer=e,this.l.connect(this.cb),this.l.connect(this.a),this.cb.connect(this.b)}c(){this.l.disconnect(),this.cb.disconnect(),this.b.disconnect(),this.a.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){0===t&&(e=Math.max(Math.min(e/100,1),0),this.g[1]=e,this.m(this.b.gain,e,i,s),this.m(this.a.gain,1-e,i,s))}Zf(t,e){this.Ld=t,this.Md=e}Ua(){const t=super.Ua();return t.bufferOriginalUrl=this.Ld,t.bufferUrl="",t.bufferType=this.Md,t}},self.ne=class extends Y5{constructor(t,e,i,s,n,a){super(t),this.R="flanger",this.g=[e,i,s,n,a],this.l=this.o(),this.a=this.o(),this.a.gain.value=1-a/2,this.b=this.o(),this.b.gain.value=a/2,this.gb=this.o(),this.gb.gain.value=n,this.U=this.f.createDelay(e+i),this.U.delayTime.value=e,this.u=this.f.createOscillator(),this.u.frequency.value=s,this.J=this.o(),this.J.gain.value=i,this.l.connect(this.U),this.l.connect(this.a),this.U.connect(this.b),this.U.connect(this.gb),this.gb.connect(this.U),this.u.connect(this.J),this.J.connect(this.U.delayTime),this.u.start(0)}c(){this.u.stop(0),this.l.disconnect(),this.U.disconnect(),this.u.disconnect(),this.J.disconnect(),this.a.disconnect(),this.b.disconnect(),this.gb.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[4]=e,this.m(this.b.gain,e/2,i,s),this.m(this.a.gain,1-e/2,i,s);break;case 6:this.g[1]=e/1e3,this.m(this.J.gain,e/1e3,i,s);break;case 7:this.g[2]=e,this.m(this.u.frequency,e,i,s);break;case 8:this.g[3]=e/100,this.m(this.gb.gain,e/100,i,s)}}},self.pe=class extends Y5{constructor(t,e,i,s,n,a,h){super(t),this.R="phaser",this.g=[e,i,s,n,a,h],this.l=this.o(),this.a=this.o(),this.a.gain.value=1-h/2,this.b=this.o(),this.b.gain.value=h/2,this.A=this.f.createBiquadFilter(),this.A.type="allpass",this.A.frequency.value=e,this.A.detune.value=i,this.A.Q.value=s,this.u=this.f.createOscillator(),this.u.frequency.value=a,this.J=this.o(),this.J.gain.value=n,this.l.connect(this.A),this.l.connect(this.a),this.A.connect(this.b),this.u.connect(this.J),this.J.connect(this.A.frequency),this.u.start(0)}c(){this.u.stop(0),this.l.disconnect(),this.A.disconnect(),this.u.disconnect(),this.J.disconnect(),this.a.disconnect(),this.b.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[5]=e,this.m(this.b.gain,e/2,i,s),this.m(this.a.gain,1-e/2,i,s);break;case 1:this.g[0]=e,this.m(this.A.frequency,e,i,s);break;case 2:this.g[1]=e,this.m(this.A.detune,e,i,s);break;case 3:this.g[2]=e,this.m(this.A.Q,e,i,s);break;case 6:this.g[3]=e,this.m(this.J.gain,e,i,s);break;case 7:this.g[4]=e,this.m(this.u.frequency,e,i,s)}}},self.oe=class extends Y5{constructor(t,e){super(t),this.R="gain",this.g=[e],this.h=this.o(),this.h.gain.value=e}c(){this.h.disconnect(),super.c()}S(t){this.h.disconnect(),this.h.connect(t)}P(){return this.h}X(t,e,i,s){const n=self.da.nd;4===t&&(this.g[0]=n(e),this.m(this.h.gain,n(e),i,s))}},self.re=class extends Y5{constructor(t,e,i){super(t),this.R="tremolo",this.g=[e,i],this.h=this.o(),this.h.gain.value=1-i/2,this.u=this.f.createOscillator(),this.u.frequency.value=e,this.J=this.o(),this.J.gain.value=i/2,this.u.connect(this.J),this.J.connect(this.h.gain),this.u.start(0)}c(){this.u.stop(0),this.u.disconnect(),this.J.disconnect(),this.h.disconnect(),super.c()}S(t){this.h.disconnect(),this.h.connect(t)}P(){return this.h}X(t,e,i,s){switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[1]=e,this.m(this.h.gain,1-e/2,i,s),this.m(this.J.gain,e/2,i,s);break;case 7:this.g[0]=e,this.m(this.u.frequency,e,i,s)}}},self.qe=class extends Y5{constructor(t,e,i){super(t),this.R="ringmod",this.g=[e,i],this.l=this.o(),this.b=this.o(),this.b.gain.value=i,this.a=this.o(),this.a.gain.value=1-i,this.tb=this.o(),this.tb.gain.value=0,this.u=this.f.createOscillator(),this.u.frequency.value=e,this.u.connect(this.tb.gain),this.u.start(0),this.l.connect(this.tb),this.l.connect(this.a),this.tb.connect(this.b)}c(){this.u.stop(0),this.u.disconnect(),this.tb.disconnect(),this.l.disconnect(),this.b.disconnect(),this.a.disconnect(),super.c()}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){switch(t){case 0:e=Math.max(Math.min(e/100,1),0),this.g[1]=e,this.m(this.b.gain,e,i,s),this.m(this.a.gain,1-e,i,s);break;case 7:this.g[0]=e,this.m(this.u.frequency,e,i,s)}}},self.le=class extends Y5{constructor(t,e,i,s,n,a){super(t),this.R="distortion",this.g=[e,i,s,n,a],this.l=this.o(),this.cc=this.o(),this.bc=this.o(),this.$f(s,n),this.b=this.o(),this.b.gain.value=a,this.a=this.o(),this.a.gain.value=1-a,this.hc=this.f.createWaveShaper(),this.Rc=new Float32Array(65536),this.gf(e,i),this.hc.curve=this.Rc,this.l.connect(this.cc),this.l.connect(this.a),this.cc.connect(this.hc),this.hc.connect(this.bc),this.bc.connect(this.b)}c(){this.l.disconnect(),this.cc.disconnect(),this.hc.disconnect(),this.bc.disconnect(),this.b.disconnect(),this.a.disconnect(),super.c()}$f(t,e){this.cc.gain.value=t=t<.01?.01:t,this.bc.gain.value=Math.pow(1/t,.6)*e}gf(e,i){for(let t=0;t<32768;++t){var s=t/32768,s=this.mg(s,e,i);this.Rc[32768+t]=s,this.Rc[32768-t-1]=-s}}mg(t,e,i){i=1.05*i*e-e;var s=t<0?-t:t;return(s<e?s:e+i*self.da.Dg(s-e,1/i))*(t<0?-1:1)}S(t){this.b.disconnect(),this.b.connect(t),this.a.disconnect(),this.a.connect(t)}P(){return this.l}X(t,e,i,s){0===t&&(e=Math.max(Math.min(e/100,1),0),this.g[4]=e,this.m(this.b.gain,e,i,s),this.m(this.a.gain,1-e,i,s))}},self.ie=class extends Y5{constructor(t,e,i,s,n,a){super(t),this.R="compressor",this.g=[e,i,s,n,a],this.h=this.f.createDynamicsCompressor(),this.h.threshold.value=e,this.h.knee.value=i,this.h.ratio.value=s,this.h.attack.value=n,this.h.release.value=a}c(){this.h.disconnect(),super.c()}S(t){this.h.disconnect(),this.h.connect(t)}P(){return this.h}X(){}},self.he=class extends Y5{constructor(t,e,i){super(t),this.R="analyser",this.g=[e,i],this.h=this.f.createAnalyser(),this.h.fftSize=e,this.h.smoothingTimeConstant=i,this.Pd=new Float32Array(this.h.frequencyBinCount),this.ae=new Uint8Array(e),this.Zd=this.Ma=0,this.i.Re(this)}c(){this.i.Tf(this),this.h.disconnect(),super.c()}Ea(){this.h.getFloatFrequencyData(this.Pd),this.h.getByteTimeDomainData(this.ae);var t=this.h.fftSize;let e=this.Ma=0;for(var i=0;i<t;++i){let t=(this.ae[i]-128)/128;t<0&&(t=-t),this.Ma<t&&(this.Ma=t),e+=t*t}i=self.da.He,this.Ma=i(this.Ma),this.Zd=i(Math.sqrt(e/t))}S(t){this.h.disconnect(),this.h.connect(t)}P(){return this.h}X(){}Be(){return{tag:this.Y,index:this.Rd,peak:this.Ma,rms:this.Zd,binCount:this.h.frequencyBinCount,freqBins:this.Pd}}}}function V(e){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(t=>u(e,"sw-message",t.data))}function W(e){if(e=e.orientation,screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(t=>console.warn("[Construct 3] Failed to lock orientation: ",t));else try{let t=!1;screen.lockOrientation?t=screen.lockOrientation(e):screen.webkitLockOrientation?t=screen.webkitLockOrientation(e):screen.mozLockOrientation?t=screen.mozLockOrientation(e):screen.msLockOrientation&&(t=screen.msLockOrientation(e)),t||console.warn("[Construct 3] Failed to lock orientation")}catch(t){console.warn("[Construct 3] Failed to lock orientation: ",t)}}async function X(t,e){let i=!0;0===(e=e.type)?i=await Y():1===e&&(i=await Z()),u(t,"permission-result",{type:e,result:i})}async function Y(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{return"granted"===await self.DeviceOrientationEvent.requestPermission()}catch(t){return console.warn("[Touch] Failed to request orientation permission: ",t),!1}}async function Z(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{return"granted"===await self.DeviceMotionEvent.requestPermission()}catch(t){return console.warn("[Touch] Failed to request motion permission: ",t),!1}}self.ma.Ta(class extends self.Ba{constructor(t){super(t,"browser"),this.s="",I(this,[["get-initial-state",t=>(this.s=t.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:void 0!==window.is_scirra_arcade})],["ready-for-sw-messages",()=>V(this)],["alert",t=>this.Ec(t)],["close",()=>{navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}],["set-focus",t=>this.Jc(t)],["vibrate",t=>{navigator.vibrate&&navigator.vibrate(t.pattern)}],["lock-orientation",t=>W(t)],["unlock-orientation",()=>{try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(t){}}],["navigate",t=>{var e,i=t.type;"back"===i?navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.history.back():"forward"===i?window.history.forward():"reload"===i?location.reload():"url"===i?(i=t.url,e=t.target,t=t.exportType,self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(i,"_system"):"preview"===t||"windows-webview2"===t?window.open(i,"_blank"):this.Sg||(2===e?window.top.location=i:1===e?window.parent.location=i:window.location=i)):"new-window"===i&&(i=t.url,t=t.tag,self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(i,"_system"):window.open(i,t))}],["request-fullscreen",t=>{if("windows-webview2"===this.s||"macos-wkwebview"===this.s)self.ma.Kb(!0),this.v.Nc({type:"set-fullscreen",fullscreen:!0});else{const e={navigationUI:"auto"};1===(t=t.navUI)?e.navigationUI="hide":2===t&&(e.navigationUI="show"),(t=document.documentElement).requestFullscreen?t.requestFullscreen(e):t.mozRequestFullScreen?t.mozRequestFullScreen(e):t.msRequestFullscreen?t.msRequestFullscreen(e):t.webkitRequestFullScreen&&(void 0!==Element.ALLOW_KEYBOARD_INPUT?t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.webkitRequestFullScreen())}}],["exit-fullscreen",()=>{"windows-webview2"===this.s||"macos-wkwebview"===this.s?(self.ma.Kb(!1),this.v.Nc({type:"set-fullscreen",fullscreen:!1})):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}],["set-hash",t=>{location.hash=t.hash}]]),window.addEventListener("online",()=>{u(this,"online-state",{isOnline:!0})}),window.addEventListener("offline",()=>{u(this,"online-state",{isOnline:!1})}),window.addEventListener("hashchange",()=>{u(this,"hashchange",{location:location.toString()})}),document.addEventListener("backbutton",()=>{u(this,"backbutton")})}Ec(t){alert(t.message)}Jc(t){if(t=t.isFocus,"nwjs"===this.s){const e="nwjs"===this.s?nw.Window.get():null;t?e.focus():e.blur()}else t?window.focus():window.blur()}}),self.ma.Ta(class extends self.Ba{constructor(t){super(t,"mouse"),I(this,[["cursor",t=>{document.documentElement.style.cursor=t}],["request-pointer-lock",()=>{this.v.G.requestPointerLock()}],["release-pointer-lock",()=>{document.exitPointerLock()}]]),document.addEventListener("pointerlockchange",()=>{u(this,"pointer-lock-change",{"has-pointer-lock":!!document.pointerLockElement})}),document.addEventListener("pointerlockerror",()=>{u(this,"pointer-lock-error",{"has-pointer-lock":!!document.pointerLockElement})})}}),self.ma.Ta(class extends self.Ba{constructor(t){super(t,"touch"),H(this,"request-permission",t=>X(this,t))}});